entity_fan_card:
  default:
    - entity_id: ''
    - name: ''
  card:
    type: custom:bubble-card
    entity: '[[entity_id]]'
    name: '[[name]]'
    card_type: button
    button_type: slider
    sub_button:
      main: []
      bottom: []
    slider_fill_orientation: left
    slider_value_position: right
    min_value: 0
    max_value: 100
    step: 25
    show_state: true
    columns: 2
    card_layout: large
    modules:
      - attribute_resolver
      - color_resolver
      - fan_resolver
      - icon_resolver
      - state_resolver
    tap_action:
      action: toggle
    bind_to_area:
      area: living_room
      bindIcon: false
    styles: |
      @keyframes rotate {
        0% {
          transform: rotate(0deg);
        }
        100% {
          transform: rotate(360deg);
        }
      }
      .bubble-name {
        font-weight: 700;
        font-size: 13px;
        font-family: var(--bubble-font-family, 'Exo 2');
      }
      .bubble-icon {
        animation: rotate ${50 / hass.states['[[entity]]'].attributes.percentage}s linear infinite;
      }
      .background-on {
        background-color: var(--m3-primary-container, var(--light-primary-color));
      }
      .bubble-state::after {
        content: " - ${hass.states['[[entity]]'].attributes.percentage}%";
        margin-left: 4px;
      }

entity_light_card:
  default:
    - entity_id: ''
    - name: ''
  card:
    type: custom:bubble-card
    entity: '[[entity_id]]'
    name: '[[name]]'
    card_type: button
    button_type: slider
    sub_button:
      main: []
      bottom: []
    slider_fill_orientation: left
    slider_value_position: right
    light_slider_type: brightness
    min_value: 0
    max_value: 100
    step: 5
    show_state: true
    columns: 2
    card_layout: large
    modules:
      - color_resolver
      - icon_resolver
    use_accent_color: false
    show_icon: true
    force_icon: true
    show_last_changed: false
    show_last_updated: false
    show_attribute: false
    attribute: brightness
    show_name: true
    tap_action:
      action: toggle
    styles: |
      .bubble-name {
        font-weight: 700;
        font-size: 13px;
        font-family: var(--bubble-font-family, 'Exo 2');
      }
      .background-on {
        background-color: var(--m3-primary-container, var(--light-primary-color));
      }
      .bubble-state::after {
        content: " - ${hass.states['[[entity]]'].attributes.percentage}%";
        margin-left: 4px;
      }

entity_media_player_card:
  default:
    - entity_id: ''
    - name: ''
  card:
    type: custom:bubble-card
    entity: '[[entity_id]]'
    name: '[[name]]'
    card_type: media-player
    card_layout: large
    hide:
      power_button: true
    sub_button:
      main: []
      bottom: []
    modules:
      - attribute_resolver
      - color_resolver
      - icon_resolver
      - media_resolver
      - state_resolver
    columns: 4
    styles: |
      .bubble-name {
        font-weight: 700;
        font-size: 13px;
        font-family: var(--bubble-font-family, 'Exo 2');
      }
      .bubble-icon-container {
        animation: ${state === 'playing' ? 'player' : 'none'} 2s infinite;
      }
      @keyframes player {
        from { transform: scale(1); filter: blur(0); }
        5% { transform: scale(1); filter: blur(0); }
        10% { transform: scale(1.1); filter: blur(1px); }
        15% { transform: scale(1); filter: blur(0); }
        45% { transform: scale(1); filter: blur(0); }
        50% { transform: scale(1.1); filter: blur(1px); }
        55% { transform: scale(1); filter: blur(0); }
        65% { transform: scale(1); filter: blur(0); }
        70% { transform: scale(1.1); filter: blur(1px); }
        75% { transform: scale(1); filter: blur(0); }
        to { transform: scale(1); filter: blur(0); }
      }

entity_switch_card:
  default:
    - entity_id: ''
    - name: ''
  card:
    type: custom:bubble-card
    entity: '[[entity_id]]'
    name: '[[name]]'
    card_type: button
    button_type: slider
    sub_button:
      main: []
      bottom: []
    slider_fill_orientation: left
    slider_value_position: right
    light_slider_type: brightness
    min_value: 0
    max_value: 100
    step: 5
    show_state: true
    columns: 2
    card_layout: large
    modules:
      - attribute_resolver
      - color_resolver
      - icon_resolver
      - state_resolver
    use_accent_color: false
    show_icon: true
    force_icon: true
    show_last_changed: false
    show_last_updated: false
    show_attribute: false
    attribute: brightness
    show_name: true
    tap_action:
      action: toggle
    styles: |
      .bubble-name {
        font-weight: 700;
        font-size: 13px;
        font-family: var(--bubble-font-family, 'Exo 2');
      }
      .background-on {
        background-color: var(--m3-primary-container, var(--light-primary-color));
      }
      .bubble-state::after {
        content: " - ${hass.states['[[entity]]'].attributes.percentage}%";
        margin-left: 4px;
      }

entity_template_card:
  default:
    - entity_id: ''
    - name: ''
  card:
    type: custom:mushroom-template-card
    secondary: "Entity ID: '[[entity_id]]'"
    icon: mdi:home
    primary: "Name: '[[name]]'"

minihass_alarm_card:
  default:
    - state_name_on: ''
    - state_name_off: ''
    - state_icon_color_on: ''
    - animation: ''
  card:
    type: "custom:button-card"
    template:
      - custom_card_alarm
    variables: 
      state_name_on: "[[state_name_on]]"
      state_name_off: "[[state_name_off]]"
      state_icon_color_on: "[[state_icon_color_on]]"
      animation: "[[animation]]"

minihass_camera_card:
  default:
    - name: ''
    - icon: ''
    - background: ''
  card:
    type: "custom:button-card"
    template:
      - custom_card_camera
    variables: 
      name: "[[name]]"
      icon: "[[icon]]"
      background: "[[background]]"

minihass_garbage_collection_card:
  default:
    - label: ''
    - counter: ''
  card:
    type: "custom:button-card"
    template:
      - custom_card_garbage_collection
    variables: 
      label: "[[label]]"
      counter: "[[counter]]"

minihass_header_left_back_card:
  default:
    - icon: ''
    - navigation_path: ''
  card:
    type: "custom:button-card"
    template:
      - custom_card_header_left_back
    variables: 
      icon: "[[icon]]"
      navigation_path: "[[navigation_path]]"

minihass_header_people_card:
  default:
    - entity1: ''
    - init1: ''
    - entity2: ''
    - init2: ''
    - entity3: ''
    - init3: ''
    - entity4: ''
    - init4: ''
    - entity5: ''
    - init5: ''
  card:
    type: "custom:button-card"
    template:
      - custom_card_header_people
    variables: 
      entity1: "[[entity1]]"
      init1: "[[init1]]"
      entity2: "[[entity2]]"
      init2: "[[init2]]"
      entity3: "[[entity3]]"
      init3: "[[init3]]"
      entity4: "[[entity4]]"
      init4: "[[init4]]"
      entity5: "[[entity5]]"
      init5: "[[init5]]"

minihass_header_right_card:
  default:
    - entity1: ''
    - icon1: ''
    - entity2: ''
    - icon2: ''
  card:
    type: "custom:button-card"
    template:
      - custom_card_header_right
    variables: 
      entity1: "[[entity1]]"
      icon1: "[[icon1]]"
      entity2: "[[entity2]]"
      icon2: "[[icon2]]"

minihass_light_card:
  default:
    - light_name: ''
    - light_label: ''
  card:
    type: "custom:button-card"
    template:
      - custom_card_light
    variables: 
      light_name: "[[light_name]]"
      light_label: "[[light_label]]"

minihass_navigate_card:
  default:
    - name: ''
    - icon: ''
    - background: ''
    - navigation_path: ''
  card:
    type: "custom:button-card"
    name: '[[name]]'
    icon: '[[icon]]'
    show_name: true
    show_icon: true
    show_label: false
    show_state: false
    tap_action:
      action: navigate
      navigation_path: '[[navigation_path]]'
    styles:
      grid:
        - grid-template-areas: '"n" "ent1"'
        - grid-template-rows: 1fr 1fr
        - column-gap: 10px
      card:
        - height: 100%
        - border-radius: var(--border-radius)
        - box-shadow: var(--box-shadow)
        - padding: 1rem
        - background: '[[background]]'
        - overflow: hidden
        - aspect-ratio: 3/2
      name:
        - position: absolute
        - top: 1rem
        - text-align: left
        - font-size: var(--fs-500)
        - font-family: var(--bubble-font-family)
        - font-weight: 600
        - justify-self: start
        - align-self: start
        - color: var(--color-white)
        - z-index: 2
        - overflow: visible
      img_cell:
        - position: absolute
        - top: 20%
        - left: 40%
        - overflow: visible
      icon:
        - position: absolute
        - width: 20em
        - opacity: 20%
        - color: var(--color-white)
        - transform: rotate(-20deg)
      custom_fields:
        ent1:
          - justify-self: start
          - align-self: end

minihass_scene_card:
  card:
    type: "custom:button-card"
    template:
      - custom_card_scene

minihass_section_title_card:
  default:
    - section_title: ''
    - section_label: ''
  card:
    type: "custom:button-card"
    template:
      - custom_card_section_title
    variables: 
      section_title: "[[section_title]]"
      section_label: "[[section_label]]"

minihass_security_card:
  card:
    type: "custom:button-card"
    template:
      - custom_card_security

person_card:
  default:
    - slug: ''
  card:
    type: custom:button-card
    entity: sensor.[[slug]]
    show_name: true
    show_icon: false
    show_label: false
    show_state: true
    show_entity_picture: true
    styles:
      grid:
        - grid-template-areas: |
            "n s"
            "blvl blvl"
            "bsts bsts"
            "dnd dnd"
        - grid-template-columns: 1fr 1fr
        - grid-template-rows: 1fr auto auto auto
        - column-gap: 10px
      card:
        - height: 100%
        - border-radius: var(--border-radius)
        - box-shadow: var(--box-shadow)
        - padding: 1rem
        - background: |
            [[[
              return states['person.[[slug]]'].state === 'home' 
                ? 'var(--gradient-green)' 
                : 'var(--gradient-red)';
            ]]]
        - overflow: hidden
        - aspect-ratio: 3/2
      name:
        - position: absolute
        - top: 1rem
        - text-align: left
        - font-size: var(--fs-500)
        - font-family: var(--bubble-font-family)
        - font-weight: 600
        - justify-self: start
        - align-self: start
        - color: var(--color-white)
        - z-index: 2
        - overflow: visible
      state:
        - text-align: right
        - font-size: var(--fs-500)
        - font-family: var(--bubble-font-family)
        - font-weight: 600
        - justify-self: end
        - align-self: start
        - color: var(--color-white)
        - z-index: 2
        - overflow: visible
      img_cell:
        - position: absolute
        - top: 20%
        - left: 40%
        - overflow: visible
      icon:
        - position: absolute
        - width: 7.5em
        - opacity: 20%
        - color: var(--color-white)
        - transform: rotate(-20deg)
      custom_fields:
        blvl:
          - justify-self: start
          - align-self: end
        bsts:
          - justify-self: start
          - align-self: end
        dnd:
          - justify-self: start
          - align-self: end
    custom_fields:
      blvl:
        card:
          type: custom:button-card
          entity: sensor.[[slug]]
          show_icon: true
          show_name: false
          show_state: false
          icon: |
            [[[
              const level = states['sensor.[[slug]]'].attributes.battery_level;
              const charging = states['sensor.[[slug]]'].attributes.is_charging === 'on';

              if (charging) {
                if (level >= 90) return 'mdi:battery-charging-100';
                if (level >= 70) return 'mdi:battery-charging-80';
                if (level >= 50) return 'mdi:battery-charging-60';
                if (level >= 30) return 'mdi:battery-charging-40';
                if (level >= 10) return 'mdi:battery-charging-20';
                return 'mdi:battery-charging-10';
              } else {
                if (level >= 90) return 'mdi:battery';
                if (level >= 70) return 'mdi:battery-80';
                if (level >= 50) return 'mdi:battery-60';
                if (level >= 30) return 'mdi:battery-40';
                if (level >= 10) return 'mdi:battery-20';
                return 'mdi:battery-alert';
              }
            ]]]
          custom_fields:
            battery_value: |
              [[[
                const level = states['sensor.[[slug]]'].attributes.battery_level;
                return `<span style="color: var(--color-white); font-size: var(--fs-400); font-weight: 600; margin-left: 0.5rem;">
                  ${level}%
                </span>`
              ]]]
          styles:
            card:
              - background: transparent
              - box-shadow: none
              - padding: 0
              - display: flex
              - flex-direction: row
              - align-items: center
            icon:
              - color: var(--color-white)
              - width: 1.5rem
            grid:
              - grid-template-areas: "\"i battery_value\""
              - grid-template-columns: min-content 1fr
            custom_fields:
              battery_value:
                - justify-self: start
                - align-self: center
      bsts:
        card:
          type: custom:button-card
          entity: sensor.[[slug]]
          show_icon: true
          show_name: false
          show_state: false
          icon: mdi:battery-outline
          custom_fields:
            battery_state_value: |
              [[[
                const state = states['sensor.[[slug]]'].attributes.battery_state;
                const formatted = state.charAt(0).toUpperCase() + state.slice(1);
                return `<span style="color: var(--color-white); font-size: var(--fs-400); font-weight: 600; margin-left: 0.5rem;">
                  ${formatted}
                </span>`
              ]]]
          styles:
            card:
              - background: transparent
              - box-shadow: none
              - padding: 0
              - display: flex
              - flex-direction: row
              - align-items: center
            icon:
              - color: var(--color-white)
              - width: 1.5rem
            grid:
              - grid-template-areas: "\"i battery_state_value\""
              - grid-template-columns: min-content 1fr
            custom_fields:
              battery_state_value:
                - justify-self: start
                - align-self: center
      dnd:
        card:
          type: custom:button-card
          entity: sensor.[[slug]]
          show_icon: true
          show_name: false
          show_state: false
          icon: mdi:bell-off
          custom_fields:
            dnd_value: |
              [[[
                const dnd = states['sensor.[[slug]]'].attributes.do_not_disturb;
                const formatted = dnd.charAt(0).toUpperCase() + dnd.slice(1);
                return `<span style="color: var(--color-white); font-size: var(--fs-400); font-weight: 600; margin-left: 0.5rem;">
                  ${formatted}
                </span>`
              ]]]
          styles:
            card:
              - background: transparent
              - box-shadow: none
              - padding: 0
              - display: flex
              - flex-direction: row
              - align-items: center
            icon:
              - color: var(--color-white)
              - width: 1.5rem
            grid:
              - grid-template-areas: "\"i dnd_value\""
              - grid-template-columns: min-content 1fr
            custom_fields:
              dnd_value:
                - justify-self: start
                - align-self: center

section_1col_card:
  default:
    - area_id: ''
    - domain: 'fan'
    - group_name: 'Fans'
    - group_icon: 'mdi:fan'
  card:
    type: vertical-stack
    visibility:
      - condition: numeric_state
        entity: 'sensor.[[area_id]]_[[domain]]_count'
        above: 0
    cards:
      - type: custom:bubble-card
        card_type: separator
        sub_button:
          main: []
          bottom: []
        name: '[[group_name]]'
        icon: '[[group_icon]]'
        styles: |
          .bubble-name {
            font-weight: 400;
            font-size: 20px;
            font-family: var(--bubble-font-family, 'Exo 2');
          }
          .bubble-line {
            background-color: var(--m3-outline-variant, var(--divider-color));
            opacity: 1;
          }
      - type: custom:auto-entities
        card:
          type: grid
          columns: 1
          square: false
        card_param: cards
        filter:
          include:
            - area: '[[area_id]]'
              domain: '[[domain]]'
              sort:
                method: friendly_name
              options:
                type: custom:streamline-card
                template: 'entity_[[domain]]_card'
                variables:
                  entity_id: this.entity_id
          exclude:
            - options: {}
              hidden_by: user
            - options: {}
              hidden_by: integration

section_1col_template_card:
  default:
    - area_id: ''
    - domain: 'fan'
    - group_name: 'Fans'
    - group_icon: 'mdi:fan'
  card:
    type: vertical-stack
    visibility:
      - condition: numeric_state
        entity: 'sensor.[[area_id]]_[[domain]]_count'
        above: 0
    cards:
      - type: custom:bubble-card
        card_type: separator
        sub_button:
          main: []
          bottom: []
        name: '[[group_name]]'
        icon: '[[group_icon]]'
        styles: |
          .bubble-name {
            font-weight: 400;
            font-size: 20px;
            font-family: var(--bubble-font-family, 'Exo 2');
          }
          .bubble-line {
            background-color: var(--m3-outline-variant, var(--divider-color));
            opacity: 1;
          }
      - type: custom:auto-entities
        card:
          type: grid
          columns: 1
          square: false
        card_param: cards
        filter:
          include:
            - area: '[[area_id]]'
              domain: '[[domain]]'
              sort:
                method: friendly_name
              options:
                type: custom:streamline-card
                template: 'entity_template_card'
                variables:
                  entity_id: this.entity_id
          exclude:
            - options: {}
              hidden_by: user
            - options: {}
              hidden_by: integration

section_2col_card:
  default:
    - area_id: ''
    - domain: 'fan'
    - group_name: 'Fans'
    - group_icon: 'mdi:fan'
  card:
    type: vertical-stack
    visibility:
      - condition: numeric_state
        entity: 'sensor.[[area_id]]_[[domain]]_count'
        above: 0
    cards:
      - type: custom:bubble-card
        card_type: separator
        sub_button:
          main: []
          bottom: []
        name: '[[group_name]]'
        icon: '[[group_icon]]'
        styles: |
          .bubble-name {
            font-weight: 400;
            font-size: 20px;
            font-family: var(--bubble-font-family, 'Exo 2');
          }
          .bubble-line {
            background-color: var(--m3-outline-variant, var(--divider-color));
            opacity: 1;
          }
      - type: custom:auto-entities
        card:
          type: grid
          columns: 2
          square: false
        card_param: cards
        filter:
          include:
            - area: '[[area_id]]'
              domain: '[[domain]]'
              sort:
                method: friendly_name
              options:
                type: custom:streamline-card
                template: 'entity_[[domain]]_card'
                variables:
                  entity_id: this.entity_id
          exclude:
            - options: {}
              hidden_by: user
            - options: {}
              hidden_by: integration

section_3col_card:
  default:
    - area_id: ''
    - domain: 'fan'
    - group_name: 'Fans'
    - group_icon: 'mdi:fan'
  card:
    type: vertical-stack
    visibility:
      - condition: numeric_state
        entity: 'sensor.[[area_id]]_[[domain]]_count'
        above: 0
    cards:
      - type: custom:bubble-card
        card_type: separator
        sub_button:
          main: []
          bottom: []
        name: '[[group_name]]'
        icon: '[[group_icon]]'
        styles: |
          .bubble-name {
            font-weight: 400;
            font-size: 20px;
            font-family: var(--bubble-font-family, 'Exo 2');
          }
          .bubble-line {
            background-color: var(--m3-outline-variant, var(--divider-color));
            opacity: 1;
          }
      - type: custom:auto-entities
        card:
          type: grid
          columns: 3
          square: false
        card_param: cards
        filter:
          include:
            - area: '[[area_id]]'
              domain: '[[domain]]'
              sort:
                method: friendly_name
              options:
                type: custom:streamline-card
                template: 'entity_[[domain]]_card'
                variables:
                  entity_id: this.entity_id
          exclude:
            - options: {}
              hidden_by: user
            - options: {}
              hidden_by: integration
