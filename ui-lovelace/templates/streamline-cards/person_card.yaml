default:
  - slug: ''
card:
  type: custom:button-card
  entity: sensor.[[slug]]
  show_name: true
  show_icon: false
  show_label: false
  show_state: true
  show_entity_picture: true
  styles:
    grid:
      - grid-template-areas: |
          "n s"
          "blvl blvl"
          "bsts bsts"
          "dnd dnd"
      - grid-template-columns: 1fr 1fr
      - grid-template-rows: 1fr auto auto auto
      - column-gap: 10px
    card:
      - height: 100%
      - border-radius: var(--border-radius)
      - box-shadow: var(--box-shadow)
      - padding: 1rem
      - background: |
          [[[
            return states['person.[[slug]]'].state === 'home' 
              ? 'var(--gradient-green)' 
              : 'var(--gradient-red)';
          ]]]
      - overflow: hidden
      - aspect-ratio: 3/2
    name:
      - position: absolute
      - top: 1rem
      - text-align: left
      - font-size: var(--fs-500)
      - font-family: var(--bubble-font-family)
      - font-weight: 600
      - justify-self: start
      - align-self: start
      - color: var(--color-white)
      - z-index: 2
      - overflow: visible
    state:
      - text-align: right
      - font-size: var(--fs-500)
      - font-family: var(--bubble-font-family)
      - font-weight: 600
      - justify-self: end
      - align-self: start
      - color: var(--color-white)
      - z-index: 2
      - overflow: visible
    img_cell:
      - position: absolute
      - top: 20%
      - left: 40%
      - overflow: visible
    icon:
      - position: absolute
      - width: 7.5em
      - opacity: 20%
      - color: var(--color-white)
      - transform: rotate(-20deg)
    custom_fields:
      blvl:
        - justify-self: start
        - align-self: end
      bsts:
        - justify-self: start
        - align-self: end
      dnd:
        - justify-self: start
        - align-self: end
  custom_fields:
    blvl:
      card:
        type: custom:button-card
        entity: sensor.[[slug]]
        show_icon: true
        show_name: false
        show_state: false
        icon: |
          [[[
            const level = states['sensor.[[slug]]'].attributes.battery_level;
            const charging = states['sensor.[[slug]]'].attributes.is_charging === 'on';
            
            if (charging) {
              if (level >= 90) return 'mdi:battery-charging-100';
              if (level >= 70) return 'mdi:battery-charging-80';
              if (level >= 50) return 'mdi:battery-charging-60';
              if (level >= 30) return 'mdi:battery-charging-40';
              if (level >= 10) return 'mdi:battery-charging-20';
              return 'mdi:battery-charging-10';
            } else {
              if (level >= 90) return 'mdi:battery';
              if (level >= 70) return 'mdi:battery-80';
              if (level >= 50) return 'mdi:battery-60';
              if (level >= 30) return 'mdi:battery-40';
              if (level >= 10) return 'mdi:battery-20';
              return 'mdi:battery-alert';
            }
          ]]]
        custom_fields:
          battery_value: |
            [[[
              const level = states['sensor.[[slug]]'].attributes.battery_level;
              return `<span style="color: var(--color-white); font-size: var(--fs-400); font-weight: 600; margin-left: 0.5rem;">
                ${level}%
              </span>`
            ]]]
        styles:
          card:
            - background: transparent
            - box-shadow: none
            - padding: 0
            - display: flex
            - flex-direction: row
            - align-items: center
          icon:
            - color: var(--color-white)
            - width: 1.5rem
          grid:
            - grid-template-areas: "\"i battery_value\""
            - grid-template-columns: min-content 1fr
          custom_fields:
            battery_value:
              - justify-self: start
              - align-self: center
    bsts:
      card:
        type: custom:button-card
        entity: sensor.[[slug]]
        show_icon: true
        show_name: false
        show_state: false
        icon: mdi:battery-outline
        custom_fields:
          battery_state_value: |
            [[[
              const state = states['sensor.[[slug]]'].attributes.battery_state;
              const formatted = state.charAt(0).toUpperCase() + state.slice(1);
              return `<span style="color: var(--color-white); font-size: var(--fs-400); font-weight: 600; margin-left: 0.5rem;">
                ${formatted}
              </span>`
            ]]]
        styles:
          card:
            - background: transparent
            - box-shadow: none
            - padding: 0
            - display: flex
            - flex-direction: row
            - align-items: center
          icon:
            - color: var(--color-white)
            - width: 1.5rem
          grid:
            - grid-template-areas: "\"i battery_state_value\""
            - grid-template-columns: min-content 1fr
          custom_fields:
            battery_state_value:
              - justify-self: start
              - align-self: center
    dnd:
      card:
        type: custom:button-card
        entity: sensor.[[slug]]
        show_icon: true
        show_name: false
        show_state: false
        icon: mdi:bell-off
        custom_fields:
          dnd_value: |
            [[[
              const dnd = states['sensor.[[slug]]'].attributes.do_not_disturb;
              const formatted = dnd.charAt(0).toUpperCase() + dnd.slice(1);
              return `<span style="color: var(--color-white); font-size: var(--fs-400); font-weight: 600; margin-left: 0.5rem;">
                ${formatted}
              </span>`
            ]]]
        styles:
          card:
            - background: transparent
            - box-shadow: none
            - padding: 0
            - display: flex
            - flex-direction: row
            - align-items: center
          icon:
            - color: var(--color-white)
            - width: 1.5rem
          grid:
            - grid-template-areas: "\"i dnd_value\""
            - grid-template-columns: min-content 1fr
          custom_fields:
            dnd_value:
              - justify-self: start
              - align-self: center
